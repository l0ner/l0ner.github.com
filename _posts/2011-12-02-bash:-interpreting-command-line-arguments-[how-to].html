--- 
layout: post
title: "Bash: interpreting command line arguments [how to]"
tags: 
- Informatics
- Linux
status: draft
type: post
published: false
meta: 
  _edit_last: "3474632"
---
<strong>The history behind:</strong>

I'm writing a little script that allows me to convert video in any format to the format my psp can read. And since videos I have vary a little, I needed to pass some arguments and switches to the script to modify it's behavior.

I googled a little, found some methods of interpreting the arguments, but none was really good and elegant. Every one I found had some problem, like not allowing me to specify long versions of the switches, or misinterpreting the switch parameter, or requiring input passed as another switch (what I don't want to do, since I want to process many videos in batch by invoking only one time the script).

In the end I found a nice method in the bash examples. It's based on getopt bash function (?) and allows me to specify both long and short versions of switches, supports switches which needs both obligatory and optional paramteres, and leaves everything that don't begin with - or -- untouched (but not the switches arguments).<strong></strong>

<strong>How to do it:</strong>

I assume You know basics of operating on bash command line arguments.

Ok, lets say we need to print 10 times a string that is specified to the script as argument. Nothing much simpler, small cycle in which we print the string.
<pre style="padding-left:30px;">#!/bin/bash
while [ $i -lt 10 ]; do
  printf "%s\n" "$1"
  i=`expr i + 1`
done
exit 0</pre>
Nice and simple, but the situation complicated itself if we need to specify manually how many times the string should be printed and we want to provideÂ  the usage instructions if -h or --help switch is specified. How do we do that?

The simplies and most elegant solution is to use getopt function. Getopt takes the options in the command line and allows parsing them.
